<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Building the Coinbase Transaction</title>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&amp;family=Inter:wght@400;600;700;800&amp;display=swap" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet"/>
<style>
        body {
            width: 1280px;
            height: 720px;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
            background-color: #0B1120; /* Very Dark Slate */
            color: #F8FAFC;
        }
        .mono-font {
            font-family: 'Roboto Mono', monospace;
        }
        /* Tech accents */
        .tech-border-left {
            border-left: 3px solid #3B82F6;
        }
        .tech-border-red {
            border-left: 3px solid #EF4444;
        }
        .tech-border-green {
            border-left: 3px solid #10B981;
        }
        /* Grid pattern */
        .bg-grid {
            background-image: linear-gradient(rgba(30, 41, 59, 0.5) 1px, transparent 1px),
            linear-gradient(90deg, rgba(30, 41, 59, 0.5) 1px, transparent 1px);
            background-size: 30px 30px;
        }
        .glass-panel {
            background: rgba(30, 41, 59, 0.4);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(59, 130, 246, 0.2);
        }
        .code-block {
            background: #1E293B;
            border: 1px solid #334155;
            color: #E2E8F0;
        }
        .step-arrow {
            position: relative;
        }
        .step-arrow::after {
            content: '';
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 10px solid #3B82F6;
        }
    </style>
</head>
<body class="relative flex flex-col justify-between">
<!-- Background Elements -->
<div class="absolute inset-0 z-0 bg-grid opacity-20"></div>
<div class="absolute top-0 right-0 w-96 h-96 bg-blue-900 rounded-full filter blur-3xl opacity-10 pointer-events-none"></div>
<!-- Header Section -->
<header class="relative z-10 px-16 pt-12 pb-6 flex items-end justify-between border-b border-gray-800">
<div>
<div class="flex items-center space-x-3 mb-2">
<span class="px-2 py-1 text-xs font-bold text-blue-900 bg-blue-500 rounded mono-font">PROTOCOL OPERATIONS</span>
<span class="text-xs text-gray-500 mono-font">// MINER SIDE</span>
</div>
<h1 class="text-4xl font-black tracking-tight text-white uppercase">
            Building the <span class="text-blue-500">Coinbase Tx</span>
</h1>
</div>
<div class="text-right">
<p class="text-gray-400 text-sm max-w-md text-right">
            The miner must assemble the coinbase transaction locally to enable extranonce searching.
        </p>
</div>
</header>
<!-- Main Content -->
<main class="relative z-10 flex-1 px-16 py-8 flex gap-12">
<!-- Left Column: Steps & Logic -->
<div class="flex-1 flex flex-col justify-center space-y-6">
<!-- Step 1 -->
<div class="glass-panel p-5 rounded-xl tech-border-left">
<h3 class="flex items-center text-lg font-bold text-blue-400 mb-2">
<span class="bg-blue-900 text-blue-300 text-xs px-2 py-0.5 rounded mr-3">STEP 1</span>
                Generate Extranonce2
            </h3>
<p class="text-gray-300 text-sm leading-relaxed mb-2">
                The miner generates a unique <code class="mono-font text-blue-300">extranonce2</code>.
            </p>
<ul class="text-xs text-gray-400 space-y-1 ml-4 list-disc">
<li>Must match length specified by <code class="mono-font">extranonce2_size</code> (e.g., 4 bytes).</li>
<li>Unique per <code class="mono-font">job_id</code> to avoid duplicate shares.</li>
<li>Incremented when 32-bit nonce overflows.</li>
</ul>
</div>
<!-- Step 2 -->
<div class="glass-panel p-5 rounded-xl tech-border-green">
<h3 class="flex items-center text-lg font-bold text-green-400 mb-2">
<span class="bg-green-900 text-green-300 text-xs px-2 py-0.5 rounded mr-3">STEP 2</span>
                Concatenate Components
            </h3>
<p class="text-gray-300 text-sm leading-relaxed mb-3">
                Combine the parts received from the pool with the locally generated extranonce.
            </p>
<div class="code-block p-3 rounded text-sm mono-font break-all border-l-4 border-green-500">
<span class="text-gray-500">Coinbase = </span><span class="text-yellow-400">Coinb1</span> + <span class="text-blue-400">Extranonce1</span> + <span class="text-green-400">Extranonce2</span> + <span class="text-yellow-400">Coinb2</span>
</div>
</div>
<!-- Step 3 -->
<div class="glass-panel p-5 rounded-xl border-l-3 border-gray-600">
<h3 class="flex items-center text-lg font-bold text-gray-300 mb-2">
<span class="bg-gray-700 text-gray-300 text-xs px-2 py-0.5 rounded mr-3">STEP 3</span>
                Calculate Merkle Root
            </h3>
<p class="text-gray-400 text-sm leading-relaxed">
                Hash the coinbase transaction to get the Transaction ID (TXID), then compute the Merkle Root using the <code class="mono-font text-gray-300">merkle_branches</code> provided in the notify message.
            </p>
</div>
</div>
<!-- Right Column: Visual Diagram & Data Structure -->
<div class="flex-1 flex flex-col space-y-6">
<!-- Visual Concatenation Diagram -->
<div class="glass-panel p-6 rounded-xl relative overflow-hidden h-full flex flex-col">
<h4 class="text-lg font-bold text-white mb-6 border-b border-gray-700 pb-2">Data Structure Visualization</h4>
<div class="flex-1 flex flex-col justify-center space-y-2">
<!-- Coinb1 -->
<div class="flex items-center">
<div class="w-32 text-xs text-gray-400 mono-font text-right mr-4">From Pool</div>
<div class="flex-1 bg-yellow-900 bg-opacity-30 border border-yellow-600 rounded p-3 text-yellow-400 mono-font text-sm truncate">
                        Coinb1 (Input Script Start)
                    </div>
</div>
<!-- Extranonce1 -->
<div class="flex items-center">
<div class="w-32 text-xs text-gray-400 mono-font text-right mr-4">Subscribe Resp.</div>
<div class="flex-1 bg-blue-900 bg-opacity-30 border border-blue-600 rounded p-3 text-blue-400 mono-font text-sm truncate">
                        Extranonce1 (Fixed per Conn)
                    </div>
</div>
<!-- Extranonce2 -->
<div class="flex items-center">
<div class="w-32 text-xs text-green-400 mono-font text-right mr-4 font-bold">Miner Generated</div>
<div class="flex-1 bg-green-900 bg-opacity-30 border border-green-500 rounded p-3 text-green-400 mono-font text-sm font-bold shadow-lg shadow-green-900/20">
                        Extranonce2 (Mutable)
                    </div>
</div>
<!-- Coinb2 -->
<div class="flex items-center">
<div class="w-32 text-xs text-gray-400 mono-font text-right mr-4">From Pool</div>
<div class="flex-1 bg-yellow-900 bg-opacity-30 border border-yellow-600 rounded p-3 text-yellow-400 mono-font text-sm truncate">
                        Coinb2 (Output Script)
                    </div>
</div>
</div>
<div class="mt-8 bg-gray-800 bg-opacity-50 p-4 rounded border border-gray-700">
<div class="flex items-start">
<i class="fas fa-info-circle text-blue-400 mt-1 mr-3"></i>
<div>
<h5 class="text-blue-300 font-bold text-sm mb-1">Why this matters</h5>
<p class="text-gray-400 text-xs leading-relaxed">
                            Modifying <code class="mono-font text-green-400">Extranonce2</code> changes the Coinbase TXID, which changes the Merkle Root, effectively giving the miner a completely new block header to hash (new 32-bit nonce space).
                        </p>
</div>
</div>
</div>
</div>
</div>
</main>
<!-- Footer -->
<footer class="relative z-10 h-16 bg-gray-900 border-t border-gray-800 flex items-center justify-between px-16">
<div class="flex items-center space-x-2 text-gray-500 text-xs mono-font">
<i class="fas fa-code-branch"></i>
<span>SLIDE 10</span>
</div>
<div class="flex items-center space-x-6">
<div class="flex items-center space-x-2">
<div class="w-2 h-2 rounded-full bg-blue-500"></div>
<span class="text-xs text-gray-400 uppercase tracking-wider">Protocol</span>
</div>
<div class="flex items-center space-x-2">
<div class="w-2 h-2 rounded-full bg-green-500"></div>
<span class="text-xs text-gray-600 uppercase tracking-wider">Construction</span>
</div>
</div>
</footer>
<script src="slides.js"></script>
<script src="navigate.js"></script>
</body>
</html>
