<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>SV1 Bootstrapping: Message Flow</title>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;family=Space+Grotesk:wght@500;700&amp;family=JetBrains+Mono:wght@400;500&amp;display=swap" rel="stylesheet"/>
<style>
    :root {
        --cyan-400: #22d3ee;
        --cyan-500: #06b6d4;
        --cyan-600: #0891b2;
        --blue-600: #2563eb;
    }
    body {
        margin: 0; padding: 0; overflow: hidden;
        background-color: #000000;
        font-family: 'Inter', sans-serif;
        width: 1280px; height: 720px;
        position: relative;
    }
        50%       { opacity: 0.06; transform: scale(1.04); }
    }

    .bg-grid {
        position: absolute; inset: 0; z-index: 1;
        background-image:
            linear-gradient(rgba(6, 182, 212, 0.07) 1px, transparent 1px),
            linear-gradient(90deg, rgba(6, 182, 212, 0.07) 1px, transparent 1px);
        background-size: 30px 30px;
        opacity: 0.5;
    }

    .slide-container {
        width: 1280px; height: 720px;
        position: relative; display: flex; flex-direction: column;
        color: #F8FAFC; overflow: hidden;
    }

    .header {
        position: relative; z-index: 10; flex-shrink: 0;
        padding: 1.4rem 3rem 1rem;
        border-bottom: 1px solid rgba(6, 182, 212, 0.2);
        background: rgba(0, 0, 0, 0.5);
        display: flex; align-items: flex-end; justify-content: space-between;
    }

    h1 {
        font-family: 'Space Grotesk', sans-serif;
        font-size: 2.5rem; color: white; margin: 0; letter-spacing: -0.02em;
        text-transform: uppercase;
    }

    .mono-font { font-family: 'JetBrains Mono', monospace; }

    .main-content {
        display: flex; flex-direction: column; flex: 1;
        position: relative; z-index: 10;
        padding: 1.25rem 3rem 1.5rem;
        gap: 0.7rem; overflow: hidden;
    }

    .flow-container {
        display: flex; flex-direction: column;
        gap: 0.6rem; height: 100%; position: relative;
    }

    .message-block {
        display: flex; align-items: center; gap: 1rem; position: relative;
    }

    .direction-arrow {
        width: 36px; flex-shrink: 0;
        display: flex; justify-content: center; align-items: center;
        position: relative; z-index: 2;
        background: #000000;
    }

    .code-card {
        flex: 1;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(8px);
        border: 1px solid rgba(6, 182, 212, 0.15);
        border-radius: 0.5rem;
        padding: 0.6rem 1rem;
        font-family: 'JetBrains Mono', monospace;
        font-size: 0.8rem;
        position: relative;
    }
    .code-card.miner {
        border-left: 3px solid var(--cyan-500);
    }
    .code-card.pool {
        border-left: 3px solid var(--cyan-400);
    }

    .label {
        position: absolute;
        top: -9px; right: 10px;
        font-size: 0.6rem;
        text-transform: uppercase;
        padding: 1px 6px;
        border-radius: 3px;
        font-weight: bold;
        font-family: 'JetBrains Mono', monospace;
        background: rgba(0, 0, 0, 0.8);
        border: 1px solid rgba(6, 182, 212, 0.3);
        color: rgba(6, 182, 212, 0.7);
        letter-spacing: 0.06em;
    }

    /* Syntax highlighting — cyan theme */
    .key    { color: var(--cyan-400); }
    .string { color: #67e8f9; }           /* cyan-300 */
    .number { color: #FCA5A5; }           /* red-300  */
    .boolean{ color: #FCD34D; }           /* amber    */
    .method { color: #ffffff; font-weight: 600; }

    .connector-line {
        position: absolute;
        left: 17px; top: 0; bottom: 0;
        width: 1px;
        background: linear-gradient(to bottom, transparent, rgba(6,182,212,0.25) 10%, rgba(6,182,212,0.25) 90%, transparent);
        z-index: 0;
    }

    .step-badge {
        display: inline-flex; align-items: center; justify-content: center;
        width: 18px; height: 18px; border-radius: 50%;
        background: rgba(6, 182, 212, 0.15);
        border: 1px solid rgba(6, 182, 212, 0.4);
        color: var(--cyan-400);
        font-size: 0.62rem; font-weight: bold;
        margin-right: 8px; flex-shrink: 0;
        vertical-align: middle;
    }

    p { margin: 0; line-height: 1.5; color: rgba(248,250,252,0.85); }
</style>
</head>
<body>
<!-- Gradient orbs -->
<!-- Grid -->
<div class="bg-grid"></div>

<div class="slide-container">
<!-- Header -->
<div class="header">
    <div>
        <div class="flex items-center space-x-3 mb-2">
            <span class="px-2 py-1 text-xs font-bold rounded mono-font"
                  style="background: rgba(6,182,212,0.15); color: #22d3ee; border: 1px solid rgba(6,182,212,0.3);">
                MESSAGE FLOW
            </span>
            <span class="text-xs mono-font" style="color: rgba(6,182,212,0.5);">// PORT 3333</span>
        </div>
        <h1>SV1 Bootstrapping: <span style="color: var(--cyan-400);">Message Flow</span></h1>
    </div>
    <div class="text-right">
        <p class="text-sm mono-font" style="color: rgba(148,163,184,0.7);">
            6-step handshake over raw TCP
        </p>
    </div>
</div>

<!-- Main Content -->
<div class="main-content">
<div class="flow-container">
<!-- Vertical connector line -->
<div class="connector-line"></div>

<!-- Step 1: Subscribe -->
<div class="message-block">
<div class="direction-arrow">
    <i class="fas fa-arrow-right" style="color: var(--cyan-500);"></i>
</div>
<div class="code-card miner">
    <div class="label">Step 1 · Miner → Pool</div>
    <p>
        <span class="step-badge">1</span>
        {<span class="key">"id"</span>: <span class="number">1</span>,
        <span class="key">"method"</span>: <span class="method">"mining.subscribe"</span>,
        <span class="key">"params"</span>: [<span class="string">"miner/1.0"</span>]}
    </p>
</div>
</div>

<!-- Step 2: Subscribe Response -->
<div class="message-block">
<div class="direction-arrow">
    <i class="fas fa-arrow-left" style="color: var(--cyan-400);"></i>
</div>
<div class="code-card pool">
    <div class="label">Step 2 · Pool → Miner</div>
    <p>
        <span class="step-badge">2</span>
        {<span class="key">"id"</span>: <span class="number">1</span>,
        <span class="key">"result"</span>: [[
        [<span class="string">"mining.set_difficulty"</span>, <span class="string">"sub1"</span>],
        [<span class="string">"mining.notify"</span>, <span class="string">"sub2"</span>]
        ], <span class="string">"extranonce1"</span>, <span class="number">4</span>],
        <span class="key">"error"</span>: <span class="boolean">null</span>}
    </p>
</div>
</div>

<!-- Step 3: Authorize -->
<div class="message-block">
<div class="direction-arrow">
    <i class="fas fa-arrow-right" style="color: var(--cyan-500);"></i>
</div>
<div class="code-card miner">
    <div class="label">Step 3 · Miner → Pool</div>
    <p>
        <span class="step-badge">3</span>
        {<span class="key">"id"</span>: <span class="number">2</span>,
        <span class="key">"method"</span>: <span class="method">"mining.authorize"</span>,
        <span class="key">"params"</span>: [<span class="string">"user.worker"</span>, <span class="string">"password"</span>]}
    </p>
</div>
</div>

<!-- Step 4: Notify (Job Push) -->
<div class="message-block">
<div class="direction-arrow">
    <i class="fas fa-arrow-left" style="color: var(--cyan-400);"></i>
</div>
<div class="code-card pool">
    <div class="label">Step 4 · Pool → Miner</div>
    <p>
        <span class="step-badge">4</span>
        {<span class="key">"id"</span>: <span class="boolean">null</span>,
        <span class="key">"method"</span>: <span class="method">"mining.notify"</span>,
        <span class="key">"params"</span>: [<span class="string">"job_id"</span>, <span class="string">"prevhash"</span>, <span class="string">"coinb1"</span>, <span class="string">"coinb2"</span>, <span class="string">"merkle_branches"</span>, <span class="string">"ver"</span>, <span class="string">"nbits"</span>, <span class="string">"ntime"</span>, <span class="boolean">true</span>]}
    </p>
</div>
</div>

<!-- Step 5: Set Difficulty -->
<div class="message-block">
<div class="direction-arrow">
    <i class="fas fa-arrow-left" style="color: var(--cyan-400);"></i>
</div>
<div class="code-card pool">
    <div class="label">Step 5 · Pool → Miner</div>
    <p>
        <span class="step-badge">5</span>
        {<span class="key">"id"</span>: <span class="boolean">null</span>,
        <span class="key">"method"</span>: <span class="method">"mining.set_difficulty"</span>,
        <span class="key">"params"</span>: [<span class="number">2</span>]}
    </p>
</div>
</div>

<!-- Step 6: Submit Share -->
<div class="message-block">
<div class="direction-arrow">
    <i class="fas fa-arrow-right" style="color: var(--cyan-500);"></i>
</div>
<div class="code-card miner">
    <div class="label">Step 6 · Miner → Pool</div>
    <p>
        <span class="step-badge">6</span>
        {<span class="key">"id"</span>: <span class="number">4</span>,
        <span class="key">"method"</span>: <span class="method">"mining.submit"</span>,
        <span class="key">"params"</span>: [<span class="string">"user.worker"</span>, <span class="string">"job_id"</span>, <span class="string">"extranonce2"</span>, <span class="string">"ntime"</span>, <span class="string">"nonce"</span>]}
    </p>
</div>
</div>

</div>
</div>
</div>
<script src="slides.js"></script>
<script src="navigate.js"></script>
</body>
</html>
